import * as React from 'react';

export interface IRouteProps {
    path?: string | RegExp;
    exact?: boolean;
    location?: ILocation
    component?: React.ComponentType<IComponentProps>;
    render?: (props: IComponentProps) => React.ReactNode;
}

export interface IComponentProps {
    location: ILocation
}

export interface ILocation<S=any> {

    /** 路由状态 */
    state: S;

    /** 路由参数 */
    search: string;

    /** 当前路由 */
    pathname: string;
}

export default class Route extends React.PureComponent<IRouteProps>{

    public render() {
        if (this.props.component) {
            return (
                <this.props.component location={this.props.location || {} as any}>
                    {this.props.children}
                </this.props.component >
            )
        }

        if (this.props.render) {
            return this.props.render({ location: this.props.location || {} as any });
        }

        return this.props.children;
    }
}
